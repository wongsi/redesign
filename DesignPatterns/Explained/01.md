# 面向对象

> 定义职责。

[TOC]


### 概念介绍

| 概念               |                                                              |
| ------------------ | ------------------------------------------------------------ |
| 功能分解           | 结构化程序员总是使用功能分解进行程序设计。功能分解是将一个问题逐渐分解为更小功能的方法，每个函数都分解到可管理为止 |
| 需求变更           | 需求变更是开发过程中与生俱来的。与其向用户或者自己抱怨获得理想而且完整的需求看来是不可能完成的任务，不如使用更有效的 开发方法，应对需求变更 |
| 对象               | 对象是由其责任定义的。对象能够自己负责自己，从而简化了使用对象的控制程序的任务 |
| 构造函数和析构函数 | 对象具有在创建和销毁自己时自动调用的特殊方法。这些特殊方法是: <br>构造函数:初始化或创建对象  <br>析构函数:在对象删除时清除对象 <br>所有面向对象语言都使用构造函数和析构函数辅助对对象的管理 |



### 常用的软件开发方法遇到的问题

1. **需求问题**

   - 用户对自己需求的看法发生改变。
   - 开发人员对用户需求的看法，会在开发过程中，因为对它更加熟悉而发生变化。

   关于需求要认识到的一点就是**需求总在变化**，这说明我们编写的代码必须要能适应变化。

2. **功能分解**，通常分析人员将问题分解成了多个功能步骤。

   - 问题1：它通常导致一个“主”程序负责控制子程序，这是将功能分解为多个子功能的自然结果。但是，主程序所承受的责任太多了。要确保一切正确工作，还要协调各函数并控制它们的先后顺序，因此，经常会产生非常复杂的代码。`委托`
   - 问题2：它在面对未来可能出现的变化，对代码改进方面，都于事无补。`变化`
   - 应对变化：与其编写一个大函数，不如使之`模块化`

3. **模块化**，肯定有助于提供代码的可理解性，而容易理解将使代码更加容易维护。

   - 问题1：低内聚，它的任务很多而且互不相关，代码经常看上去像是令人疑惑的一大团。（内聚性指实例中操作之间联系的紧密程度，一个类的多个操作联系越紧密，就越容易理解其含义，也称清晰性。）
   - 问题2：紧耦合（耦合性指两个实例之间联系的紧密程度。）
   - `不良副作用` 即，修改某处，虽然获得了希望的结果，但也得到了不需要的结果——隐错。
   - `维护和调试的时间` 大多数时间被用于努力弄清代码的运作机理、寻找隐错和防止出现不良副作用。

   使用功能分解时，需求变更会对软件开发和维护工作产生极大影响。这时候，主要的精力都放在函数上了，而对一组函数或数据的修改会影响到其它函数和数据，并依此类推地影响到其它必须修改的函数。就像一个雪球滚下山来，一路裹挟了更多的雪一样。只关注函数，将导致一连串变化，而且难以避免。`功能分解将注意力放在错误的地方`

### 应对需求变更——日常生活中人们如何做事？

假设你是讲师， 听课的人在课后还要去听其他课， 但他们不知道下一堂课的听课点。需要你确保大家都知道下一堂课去哪里上。 

方法1 直接指示每个人，必须密切关注大量细节，没有其他人负责。

方法2 路线贴出来，只给出通用的提示，然后期待其他人自己弄清怎么完成任务。

- 责任转移

  - 人们对自己的行为负责，而不再由控制程序负责决定他们的行为。
  - 控制程序可以与不同类型的人交流，好像他们都一样。
  - 控制程序不需要知道完成任务的任何特殊步骤。

- 软件开发过程中的视角

  - 概念：`软件要负责什么？` 研究领域中的各种概念，得出概念模型时应该很少或者不考虑实现它的软件。
  - 规约：`怎么使用软件？` 考虑软件，关注软件的接口，而不是实现。 
  - 实现：`软件怎么履行自己的责任？` 这时考虑的是软件本身。

  在一个层次（概念）上交流，而在另一个层次（实现）上执行，这样调用者就无需知道具体细节了。

### 对象——具有责任的东西

  理解对象的最佳方式，是将其看成`具有责任的东西`。

  好的设计规则：对象应该自己负责自己，而且应该清楚地定义责任。

  - 概念视角：对象是一组责任。
  - 规约视角：对象是一组可以被其它对象或自己调用的方法（行为）。
  - 实现视角：对象是代码和数据，以及它们之间的计算交互。

  ```
  对象具有供其他对象使用的接口
  围绕类组织对象
  使用对象将责任转移到更局部的层次
  对象是类的实例
  抽象类型的需要
  抽象类定义了一组类可以做什么
  抽象类可以充当其他类的占位符
  ```

例如，Student 就是抽象类。具体类 RegularStudent 和 GraduateStudent 则代表了两种类型的 Student。RegularStudent 是一种 Student，Gradu ateStudent 也是一种 Student。 

这种关系叫做is-a(是一个/种) 关系，是我们称之为继承(inheritance) 关系的一种特例。 